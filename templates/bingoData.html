<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Bingo Data</title>

    <!-- Style -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>		
	<link rel="icon" type="image/png" href="{{ url_for('static', filename='5.png') }}"/>
<link rel="icon" type="image/png" href="{{ url_for('static', filename='5.png') }}"/>
<script src="{{ url_for('static', filename='js/goal-list.js') }}" type="text/javascript"></script>
    <style>
	body{
		 padding-right: 30px;
	  padding-left: 30px;
	   padding-top: 5px;
		background:#2c2f33;
		color:#bec7d2;
	}
	#bingo td {
	background:#000811;
	border:2px #0a245a solid;
	color:#3c70df;
	font-size:100%;
	font-weight:400;
	height:75px;
	width:75px;
	max-height:75px;
	max-width:75px;
	text-align:center;

}

#bingo td:hover {
	background:#1448b3;
	color:#fff;
}
	
#bingo tr td.greensquare {
	background:#051;
}

#bingo tr td.greensquare.hover {
	background:#072;
}	

.grid-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-gap: 20px;
}	

.center {
  display: block;
  margin-left: auto;
  margin-right: auto;

}

.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

.switch input { 
  opacity: 0;
  width: 0;
  height: 0;
}

.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #2196F3;
}

input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

/* Rounded sliders */
.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}	
	
	</style>
</head>
<body>
<div style="display:flex;">	
	<div>
	<p> The Fastest Card on the v2020 Patch </p>
				<table id="bingo">
					<tr>
						<td class="popout" id="tlbr">TL-BR</td>
						<td class="popout" id="col1">COL1</td>
						<td class="popout" id="col2">COL2</td>
						<td class="popout" id="col3">COL3</td>
						<td class="popout" id="col4">COL4</td>
						<td class="popout" id="col5">COL5</td>
					</tr>
					<tr>
						<td class="popout" id="row1">ROW1</td>
						<td class="row1 col1 tlbr" id="slot1"></td> 
						<td class="row1 col2" id="slot2"></td> 
						<td class="row1 col3" id="slot3"></td> 
						<td class="row1 col4" id="slot4"></td> 
						<td class="row1 col5 bltr" id="slot5"></td> 
					</tr>
					<tr> 
						<td class="popout" id="row2">ROW2</td>
						<td class="row2 col1" id="slot6"></td> 
						<td class="row2 col2 tlbr" id="slot7"></td> 
						<td class="row2 col3" id="slot8"></td> 
						<td class="row2 col4 bltr" id="slot9"></td> 
						<td class="row2 col5" id="slot10"></td> 
					</tr>
					<tr> 
						<td class="popout" id="row3">ROW3</td>
						<td class="row3 col1" id="slot11"></td> 
						<td class="row3 col2" id="slot12"></td> 
						<td class="row3 col3 tlbr bltr" id="slot13"></td> 
						<td class="row3 col4" id="slot14"></td> 
						<td class="row3 col5" id="slot15"></td> 
					</tr>
					<tr> 
						<td class="popout" id="row4">ROW4</td>
						<td class="row4 col1" id="slot16"></td> 
						<td class="row4 col2 bltr" id="slot17"></td> 
						<td class="row4 col3" id="slot18"></td> 
						<td class="row4 col4 tlbr" id="slot19"></td> 
						<td class="row4 col5" id="slot20"></td> 
					</tr>
					<tr> 
						<td class="popout" id="row5">ROW5</td>
						<td class="row5 col1 bltr" id="slot21"></td> 
						<td class="row5 col2" id="slot22"></td> 
						<td class="row5 col3" id="slot23"></td> 
						<td class="row5 col4" id="slot24"></td> 
						<td class="row5 col5 tlbr" id="slot25"></td> 
					</tr>
					<tr>
						<td class="popout" id="bltr">BL-TR</td>
					</tr>
				</table>

	<p id = "fast"></p>
	</div>
	<div>
		<p> All Cards </p>
		<table id="bingo">
					<tr>
						<td class="popout" id="tlbr">TL-BR</td>
						<td class="popout" id="col1">COL1</td>
						<td class="popout" id="col2">COL2</td>
						<td class="popout" id="col3">COL3</td>
						<td class="popout" id="col4">COL4</td>
						<td class="popout" id="col5">COL5</td>
					</tr>
					<tr>
						<td class="popout" id="row1">ROW1</td>
						<td class="row1 col1 tlbr" id="2slot1"></td> 
						<td class="row1 col2" id="2slot2"></td> 
						<td class="row1 col3" id="2slot3"></td> 
						<td class="row1 col4" id="2slot4"></td> 
						<td class="row1 col5 bltr" id="2slot5"></td> 
					</tr>
					<tr> 
						<td class="popout" id="row2">ROW2</td>
						<td class="row2 col1" id="2slot6"></td> 
						<td class="row2 col2 tlbr" id="2slot7"></td> 
						<td class="row2 col3" id="2slot8"></td> 
						<td class="row2 col4 bltr" id="2slot9"></td> 
						<td class="row2 col5" id="2slot10"></td> 
					</tr>
					<tr> 
						<td class="popout" id="row3">ROW3</td>
						<td class="row3 col1" id="2slot11"></td> 
						<td class="row3 col2" id="2slot12"></td> 
						<td class="row3 col3 tlbr bltr" id="2slot13"></td> 
						<td class="row3 col4" id="2slot14"></td> 
						<td class="row3 col5" id="2slot15"></td> 
					</tr>
					<tr> 
						<td class="popout" id="row4">ROW4</td>
						<td class="row4 col1" id="2slot16"></td> 
						<td class="row4 col2 bltr" id="2slot17"></td> 
						<td class="row4 col3" id="2slot18"></td> 
						<td class="row4 col4 tlbr" id="2slot19"></td> 
						<td class="row4 col5" id="2slot20"></td> 
					</tr>
					<tr> 
						<td class="popout" id="row5">ROW5</td>
						<td class="row5 col1 bltr" id="2slot21"></td> 
						<td class="row5 col2" id="2slot22"></td> 
						<td class="row5 col3" id="2slot23"></td> 
						<td class="row5 col4" id="2slot24"></td> 
						<td class="row5 col5 tlbr" id="2slot25"></td> 
					</tr>
					<tr>
						<td class="popout" id="bltr">BL-TR</td>
					</tr>
				</table>
		<p id = "all"></p>
		<button onclick="nextCard(-1);" type="button" style="color:black;">Prev</button><button onclick="nextCard(1);" type="button" style="color:black;">Next</button>
	</div>
</div>
<br>
<br>
<button onclick="count_all_goals();" type="button" style="color:black;">Count All Goals</button><button onclick="count_chosen_goals();" type="button" style="color:black;">Count Goals Chosen</button>
<p id="goal_data"></p>
<script>
var bingo = '{{data}}';
bingo = bingo.split('$');

for( var i = 0; i< bingo.length-1;i++){
	bingo[i] = bingo[i].split('@');
	bingo[i][6] = bingo[i][6].split('%');
}

//fastest
var fast_time = 999999
var time_index = -1;
for( var i = 0; i< bingo.length-1;i++){
	var time = parseInt(bingo[i][4].replace(":",""));
	if (time< fast_time){
		fast_time = time;
		time_index = i;
	}
}
//Build Card
for( var i = 1; i<= 25 ;i++){
	document.getElementById("slot"+i).innerHTML = bingo[time_index][6][i-1];
}
//Highlight Row
for( var i = 1; i<= 25 ;i++){
	if (document.getElementById("slot"+i).className.includes(bingo[time_index][3])){
		document.getElementById("slot"+i).style.backgroundColor = "green";
		document.getElementById("slot"+i).style.color = "white";
	}
}
document.getElementById("fast").innerHTML = "Card Info:<br>Player: "+bingo[time_index][5]+"<br>Time: "+bingo[time_index][4]+"<br>Seed: "+bingo[time_index][2]+"<br>Date: "+bingo[time_index][1];


//All Cards
var current_card = 0;
function nextCard(dir){
	current_card = current_card + dir;
	if (current_card > bingo.length-2){
		current_card =0;
	}
	if (current_card < 0){
		current_card = bingo.length-2;
	}
	//Build Card
	for( var i = 1; i<= 25 ;i++){
		document.getElementById("2slot"+i).innerHTML = bingo[current_card][6][i-1];
		document.getElementById("2slot"+i).style.backgroundColor = "#000811";
		document.getElementById("2slot"+i).style.color = "#3c70df";	
	}
	//Highlight Row
	for( var i = 1; i<= 25 ;i++){
		if (document.getElementById("2slot"+i).className.includes(bingo[current_card][3])){
			document.getElementById("2slot"+i).style.backgroundColor = "green";
			document.getElementById("2slot"+i).style.color = "white";
		}
	}
	document.getElementById("all").innerHTML = "Card Info:<br>Player: "+bingo[current_card][5]+"<br>Time: "+bingo[current_card][4]+"<br>Seed: "+bingo[time_index][2]+"<br>Date: "+bingo[current_card][1];

}

//Count Goals
var calc_cg = 0;
function count_all_goals(){
sort_goals = [];
document.getElementById("goal_data").innerHTML = "";
if (calc_cg==0){
	for( var i = 1; i<= 25 ;i++){
		for( var j = 0; j<= bingoList[i].length-1 ;j++){
			
			for( var x = 0; x<= bingo.length-2 ;x++){
				for( var y = 0; y < 25 ;y++){
					if( bingoList[i][j].total == null){
						bingoList[i][j].total = 0;
					}
					if (bingoList[i][j].name.replace("'","").replace("&","and") == bingo[x][6][y]){
						
							bingoList[i][j].total += 1;

					}
				}
			}
		}
	}
	calc_cg =1;
}
	for( var i = 1; i<= 25 ;i++){
		for( var j = 0; j<= bingoList[i].length-1 ;j++){
			sort_goals.push({name : bingoList[i][j].name, total : bingoList[i][j].total});
		}
	}
	sort_goals.sort(function(a, b){return b.total-a.total});

	for( var i = 0; i< sort_goals.length ;i++){
		document.getElementById("goal_data").innerHTML = document.getElementById("goal_data").innerHTML+ sort_goals[i].name+" :: "+sort_goals[i].total+"<br>";
		}
}

//Count Goals
var goal_map ={"row1" :[1,2,3,4,5],"row2":[6,7,8,9,10], "row3": [11,12,13,14,15], "row4": [16,17,18,19,20], "row5":[21,22,23,24,25],"col1": [1,6,11,16,21], "col2":[2,7,12,17,22], "col3":[3,8,13,18,23],"col4": [4,9,14,19,24],"col5": [5,10,15,20,25], "tlbr":[1,7,13,19,25], "bltr": [21,17,13,9,5]};
var calc_ccg = 0;
function count_chosen_goals(){
sort_goals = [];
document.getElementById("goal_data").innerHTML = "";
if (calc_ccg==0){	
	for( var i = 1; i<= 25 ;i++){
		for( var j = 0; j<= bingoList[i].length-1 ;j++){
			
			for( var x = 0; x<= bingo.length-2 ;x++){
				for( var y = 0; y < 25 ;y++){
					if( bingoList[i][j].pick == null){
						bingoList[i][j].pick = 0;
					}
					
					if (bingoList[i][j].name.replace("'","").replace("&","and") == bingo[x][6][y] && goal_map[bingo[x][3]].includes(y)){
						
							bingoList[i][j].pick += 1;

					}
				}
			}
		}
	}
	calc_ccg =1;
}
	for( var i = 1; i<= 25 ;i++){
		for( var j = 0; j<= bingoList[i].length-1 ;j++){
			sort_goals.push({name : bingoList[i][j].name, pick : bingoList[i][j].pick});
		}
	}
	sort_goals.sort(function(a, b){return b.pick-a.pick});

	for( var i = 0; i< sort_goals.length ;i++){
		document.getElementById("goal_data").innerHTML = document.getElementById("goal_data").innerHTML+ sort_goals[i].name+" :: "+sort_goals[i].pick+"<br>";
		}
}

</script>
</body>
</html>